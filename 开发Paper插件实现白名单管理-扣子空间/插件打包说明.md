# Paper白名单管理插件 - 打包说明

## 一、环境要求
- JDK 11或更高版本
- Maven 3.6+
- Git

## 二、源码获取
```bash
git clone https://github.com/yourusername/paper-whitelist-plugin.git
cd paper-whitelist-plugin
```

## 三、使用Maven打包

### 1. 编译并打包
```bash
mvn clean package
```

### 2. 打包结果
成功打包后，插件jar文件将生成在`target/`目录下，文件名为`paper-whitelist-plugin-1.0-SNAPSHOT.jar`

### 3. 可选：自定义版本号
修改`pom.xml`中的`<version>`标签，然后重新打包：
```xml
<version>1.0.0</version>
```

## 四、打包过程说明

### Maven命令解释
- `clean`: 清理之前的编译结果
- `package`: 编译并打包项目

### 打包过程中执行的操作
1. 编译Java源代码
2. 处理资源文件（复制配置文件、网页文件等）
3. 运行测试（如果有）
4. 使用maven-shade-plugin打包所有依赖
5. 生成可执行的插件jar文件

## 五、依赖处理说明
本插件使用maven-shade-plugin将所有依赖打包到最终的jar文件中，并重定位了可能与其他插件冲突的依赖包：
- SparkJava相关类重定位到`com.example.paperwhitelist.shaded.spark`
- Jetty相关类重定位到`com.example.paperwhitelist.shaded.jetty`
- SnakeYAML相关类重定位到`com.example.paperwhitelist.shaded.snakeyaml`
- H2数据库相关类重定位到`com.example.paperwhitelist.shaded.h2`
- BCrypt相关类重定位到`com.example.paperwhitelist.shaded.bcrypt`

这种处理方式可以避免与其他插件的依赖冲突。

## 六、排除不必要的文件
打包过程中会自动排除：
- 源代码文件
- Maven配置文件
- Git版本控制文件
- IDE配置文件

## 七、验证打包结果
可以使用以下命令检查jar文件内容：
```bash
jar tf target/paper-whitelist-plugin-1.0-SNAPSHOT.jar
```

确认以下内容存在：
- 插件主类（com/example/paperwhitelist/PaperWhitelistPlugin.class）
- 配置文件（plugin.yml, config.yml）
- 网页资源文件（web/目录下的html、css、js文件）
- 重定位后的依赖类

## 八、发布准备
打包完成后，建议：
1. 将jar文件重命名为更简洁的名称，如`PaperWhitelist.jar`
2. 准备插件说明文档（README.md）
3. 准备截图（如果需要）
4. 编写更新日志（CHANGELOG.md）